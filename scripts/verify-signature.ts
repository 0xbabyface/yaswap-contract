import { ethers } from "hardhat";

import * as config from "../deployed-info.json";

(BigInt.prototype as any).toJSON = function () {
  return this.toString();
};

async function main() {
  const fibProxy = await ethers.getContractAt("FibTrade", config.polygon.fibProxy);

  // const usdt = await ethers.getContractAt('ERC20', '0xc2132D05D31c914a87C6611C10748AEb04B58e8F');
  // let tx = await usdt.approve(config.polygon.fibProxy, ethers.parseUnits('2.0', 6));
  // await tx.wait();

  let tx = await fibProxy.swap({
    fromToken: "0xc2132D05D31c914a87C6611C10748AEb04B58e8F",
    toToken: "0xaf88d065e77c8cC2239327C5EDb3A432268e5831",
    fromTokenAmount: 1000000,
    dexAddress: "0x89f423567c2648BB828c3997f60c47b54f57Fa6e",
    dexCalldata: "0x3d21e25a0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000c2132d05d31c914a87c6611c10748aeb04b58e8f0000000000000000000000008f3cf7ad23cd3cadbd9735aff958023239c6a063000000000000000000000000fc99f58a8974a4bc36e60e2d490bb8d72899ee9f000000000000000000000000000000000000000000000000000000000000000a193f8959530a080000000000000000000000000000000000000000000000a4b1000000000000000000000000000000000000000000000000000000000098968000000000000000000000000000000000000000000000000087603d4c35edf46c00000000000000000000000000000000000000000000000083e79e300008ac83000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000b60000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000e7085b1f0345820000000000000000000000000000000000000000000000000000000065a2ad520000000000000000000000000000000000000000000000000000000000000964d1b260d4000000000000000000000000000000000000000000000000193f8959530a0800000000000000000000000000c2132d05d31c914a87c6611c10748aeb04b58e8f0000000000000000000000008f3cf7ad23cd3cadbd9735aff958023239c6a063000000000000000000000000000000000000000000000000000000000098968000000000000000000000000000000000000000000000000083e79e300008ac830000000000000000000000000000000000000000000000000000000065a2bb620000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000009400000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000098968000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000280000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000c2132d05d31c914a87c6611c10748aeb04b58e8f0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000339e63b4ca123b6d5bad97057119c58e7ee7637b0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000339e63b4ca123b6d5bad97057119c58e7ee7637b00000000000000000000000000000000000000000000000000000000000000018000000000000000000027100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000060000000000000000000000000c2132d05d31c914a87c6611c10748aeb04b58e8f0000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000000000000000000000000000000000000097815b4200000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000001600000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f61900000000000000000000000000000000000000000000000000000000000000010000000000000000000000007a8f557916d99945eaf2f8763935a70bdc81f65000000000000000000000000000000000000000000000000000000000000000010000000000000000000000007a8f557916d99945eaf2f8763935a70bdc81f6500000000000000000000000000000000000000000000000000000000000000001800000000000000000002710ce67850420c82db45eb7feeccd2d181300d2bdb30000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000600000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000000000000000000001f400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000001600000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000000000000000000000010000000000000000000000007a8f557916d99945eaf2f8763935a70bdc81f65000000000000000000000000000000000000000000000000000000000000000010000000000000000000000007a8f557916d99945eaf2f8763935a70bdc81f65000000000000000000000000000000000000000000000000000000000000000010000000000000000000027105645dcb64c059aa11212707fbf4e7f984440a8cf0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000600000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000008f3cf7ad23cd3cadbd9735aff958023239c6a063000000000000000000000000000000000000000000000000000000000000006400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002a30786132333839303337353131304635383435313744306144416435383336344531663766466646363100000000000000000000000000000000000000000000",
    approveAddress: "0x3B86917369B83a6892f553609F3c2F439C184e31",
    minOutAmount: 0,
    inviteCode: "0x",
    v: 27, r: "0xa9d2db9cf61472057a74c94a96a34f28b8434d900ee23cd95e0d964f8e65a805", s: "0xa9d2db9cf61472057a74c94a96a34f28b8434d900ee23cd95e0d964f8e65a805"
  }, true);

  await tx.wait();

  console.log(`txhash: ${tx.hash}`);

}

main();

// inviteCode: "0x000000000000000000000000aa1ae9032d6bec5217f70e9dd2fb54105a266faa0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000b30306e7267697e78473031000000000000000000000000000000000000000000",
// v: 27, r: "0xa9d2db9cf61472057a74c94a96a34f28b8434d900ee23cd95e0d964f8e65a805", s: "0x37505148097cb28aef573e8d8836f0d33f9d6d6763811bd4aeda24c25d006426"